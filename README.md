# 基于变色龙哈希的可修改区块链

这是一个使用Python和现代Web技术实现的基于变色龙哈希的可修改区块链演示系统。该项目展示了如何使用变色龙哈希算法创建一个可以在特定条件下安全修改数据的区块链系统，同时保持区块链的完整性和可验证性。

## 项目概述

传统区块链系统的一个核心特性是其不可篡改性，一旦数据被添加到区块链中，就无法更改。然而，在某些应用场景下，例如满足数据隐私法规（如GDPR的"被遗忘权"）或纠正错误信息时，可能需要一种受控的方式来修改区块链数据。

本项目通过引入变色龙哈希技术，提供了一种创新的解决方案，允许拥有特定密钥的授权用户修改区块内容，同时保持区块链的密码学完整性。

## 功能特点

- **变色龙哈希技术**: 使用密码学陷门函数实现可控的哈希碰撞
- **多级密钥管理**: 支持默认密钥和有使用次数限制的临时密钥创建
- **区块操作**: 添加新区块、查看区块链、修改现有区块
- **区块修改历史**: 追踪所有区块修改的历史记录和修改者信息
- **响应式Web界面**: 使用Tailwind CSS构建的现代化用户界面
- **深色模式支持**: 提供明亮和深色两种界面主题
- **JSON数据支持**: 支持存储和修改复杂的JSON格式数据
- **RESTful API**: 基于Flask的Web API，便于与其他系统集成

## 技术栈

- **后端**: Python 3.8+, Flask, Flask-CORS
- **前端**: HTML5, JavaScript, Tailwind CSS, Animate.css, Font Awesome
- **密码学**: 变色龙哈希算法, SHA-256, RSA

## 项目结构

```
/
├── main.py                # 项目入口文件
├── requirements.txt       # 项目依赖
├── README.md              # 项目文档
├── src/                   # 源代码目录
│   ├── __init__.py
│   ├── app.py             # Flask应用和API路由
│   ├── blockchain.py      # 区块链核心实现
│   └── chameleon_hash.py  # 变色龙哈希实现
├── static/                # 静态资源文件
└── templates/             # HTML模板
    ├── index.html         # 主页面
    ├── key_management.html # 密钥管理页面
    └── block_operations.html # 区块操作页面
```

## 安装与运行

### 前提条件

- Python 3.8或更高版本
- pip (Python包管理器)
- 网络浏览器(推荐Chrome, Firefox或Edge的最新版本)

### 安装步骤

1. 克隆或下载项目代码到本地:

```
git clone <项目仓库URL>
# 或直接下载ZIP文件并解压
```

2. 进入项目目录:

```
cd Revisable_Blockchain_Demo
```

3. 安装所需依赖:

```
pip install -r requirements.txt
```

4. 启动应用:

```
python main.py
```

5. 在浏览器中访问: `http://localhost:5000`

## 详细使用指南

### 主页面

主页面提供了系统概览和区块链可视化:

- **区块链可视化**: 以图形方式展示当前区块链中的所有区块及其连接
- **区块链状态**: 显示当前区块链的健康状态、区块数量等信息
- **导航菜单**: 可以访问密钥管理和区块操作页面

### 密钥管理

密钥管理页面允许您:

1. **获取默认密钥**:
   - 点击"获取默认密钥"按钮
   - 系统会显示默认密钥对(公钥和私钥)，此密钥拥有无限制的修改权限

2. **生成新密钥**:
   - 点击"生成新密钥"按钮
   - 在弹出的模态窗口中，输入:
     - 授权私钥(默认密钥的私钥)
     - 使用次数限制(如5次)
     - 密钥描述
   - 点击"生成受限密钥"按钮
   - 系统会创建一个新的密钥对，该密钥只能用于修改区块指定的次数

3. **查看和使用密钥**:
   - 在"可用密钥列表"区域可以查看所有密钥
   - 点击"用于修改"按钮可选择该密钥用于区块修改操作

### 区块操作

区块操作页面允许您:

1. **添加新区块**:
   - 在"区块数据"文本框中输入数据
   - 如果数据是JSON格式，勾选"以JSON格式处理数据"选项
   - 点击"添加区块"按钮
   - 成功后，新区块会显示在区块预览区域

2. **修改区块**:
   - 在"区块索引"输入框中输入要修改的区块编号
   - 在"新数据"文本框中输入新的数据内容
   - 如果数据是JSON格式，勾选"以JSON格式处理数据"选项
   - 在"私钥"输入框中输入有效的私钥(从密钥管理页面获取)
   - 点击"修改区块"按钮
   - 成功后，修改会反映在区块预览区域，并记录修改历史

3. **查看区块链**:
   - "区块预览"区域显示当前区块链的可视化表示
   - 每个区块显示其索引、哈希值前缀和数据预览
   - 点击区块可自动选择该区块进行修改
   - 点击"刷新"按钮更新区块链视图

## 变色龙哈希的原理与应用

变色龙哈希是一种特殊的密码学哈希函数，具有以下独特特性:

1. **抗碰撞性**: 与传统哈希函数一样，在不知道陷门的情况下，找到两个具有相同哈希值的不同消息是计算上不可行的
2. **陷门功能**: 知道特定"陷门"(私钥)的人可以找到哈希碰撞，即为不同的消息生成相同的哈希值
3. **安全控制**: 只有拥有私钥的授权用户才能生成有效的碰撞

在本项目中，变色龙哈希使区块链系统具有了以下能力:

- **可控修改**: 允许使用私钥修改区块内容
- **保持完整性**: 修改后的区块仍然与下一个区块正确链接，不破坏区块链的完整性
- **可追溯性**: 所有修改操作都记录在区块的修改历史中
- **访问控制**: 可以通过密钥管理限制谁可以修改区块以及修改次数

## 应用场景

本系统适用于以下场景:

- **合规性要求**: 满足GDPR等数据隐私法规的"被遗忘权"要求
- **错误纠正**: 纠正区块链中的错误数据，而不需要分叉整个链
- **内容审核**: 允许有权限的审核者删除或修改非法或不当内容
- **记录更新**: 允许对需要更新的记录(如个人信息、证书状态等)进行修改
- **演示与教育**: 作为传统区块链的替代方案进行概念验证和教育目的

## 安全注意事项

- **密钥管理**: 在实际应用中，私钥必须安全存储，不应公开显示
- **权限控制**: 建议实施更复杂的权限控制机制，限制谁可以执行修改操作
- **审计日志**: 所有修改操作应记录详细的审计日志，包括谁、何时、为何修改
- **演示目的**: 本项目主要用于演示和学习目的，生产环境使用需要额外的安全措施

## 开发者信息

本演示系统基于Python和现代Web技术构建，旨在展示变色龙哈希在区块链中的创新应用。它提供了一个完整的用户界面，允许用户与系统交互，添加和修改区块，管理密钥，以及查看区块链状态。

该项目可以作为研究、教育或开发更复杂系统的起点，展示了如何在保持区块链核心价值的同时，增加可控的修改能力。